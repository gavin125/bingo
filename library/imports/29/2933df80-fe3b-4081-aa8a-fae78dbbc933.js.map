{"version":3,"sources":["..\\..\\..\\..\\assets\\Script/assets\\Script\\gamejs.js"],"names":["cc","Class","extends","Component","properties","clock","timeLabel","default","type","Label","sendNode","Node","myscrollView","ScrollView","hideboxNode","pageNode","ballPrefab","Prefab","trayPrefab","cardPrefab","tabbarPrefab","endLabel","onLoad","num","window","cardnum","initDate","height","Math","ceil","i","newTray","instantiate","getComponent","data","initTrayData","addChild","newTabbar","curr","text","string","_time","_doneArr","going","update","dt","gameEnd","addBall","_this","success","baseArr","push","baseBingo","B","slice","I","N","G","O","n","arr","listB","randomCard","listI","listN","listG","listO","forEach","v","Card","splice","copy","temp","t","floor","random","length","sign","newBall","randomBall","insertChild","str","node","getChildByName","active","back","director","loadScene","again"],"mappings":"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","file":"gamejs.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\ncc.Class({\r\n  extends: cc.Component,\r\n\r\n  properties: {\r\n  \tclock:200,\r\n\t\ttimeLabel: {default: null,type: cc.Label},\r\n\t\tsendNode: {default: null,type: cc.Node},\r\n\t\tmyscrollView: {default: null,type: cc.ScrollView},\r\n\t\thideboxNode: {default: null,type: cc.Node},\r\n    pageNode: {default: null,type: cc.Node},\r\n\t\tballPrefab: {default: null,type: cc.Prefab},\r\n\t\ttrayPrefab: {default: null,type: cc.Prefab},\r\n\t\tcardPrefab: {default: null,type: cc.Prefab},\r\n\t\ttabbarPrefab: {default: null,type: cc.Prefab},\r\n\t\tendLabel: {default: null,type: cc.Label},\r\n  },\r\n\r\n\r\n  onLoad () {  \r\n\t\tthis.num=window.cardnum?window.cardnum:5;\r\n    this.initDate();\r\n    this.hideboxNode.height=490+(Math.ceil(this.num/2)-1)*540;\r\n\r\n\t\tfor(let i=1;i<=this.num;i++){\r\n\t\t\tvar newTray = cc.instantiate(this.trayPrefab);\r\n      newTray.getComponent('trayjs').data=this.initTrayData();\r\n\t\t\tthis.hideboxNode.addChild(newTray);\r\n\t\t}\r\n    \r\n\t\tif(Math.ceil(this.num/2)>1){\r\n\t\t\tfor(let i=1;i<=Math.ceil(this.num/2);i++){\r\n\t\t\t\tvar newTabbar = cc.instantiate(this.tabbarPrefab);\r\n\t\t\t\tif(i==1){newTabbar.getComponent('tabbarjs').curr=true;}\r\n\t\t\t\tnewTabbar.getComponent('tabbarjs').text=i;\r\n\t\t\t\tthis.pageNode.addChild(newTabbar);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.timeLabel.string=this.clock;\r\n\t\tthis._time=0;\r\n\t\tthis._doneArr=[];\r\n\t\tthis.going=true;\r\n\r\n  },\r\n\r\n  // start () {},\r\n\r\n  update (dt) {\r\n\t\tif(!this.going){return;}\r\n\t\t// 倒计时\r\n    if(this.clock<0){\r\n      this.gameEnd('GameOver! TIME OUT!');\r\n    }else{\r\n      this.clock-=dt;\r\n      this.timeLabel.string=Math.ceil(this.clock);\r\n    }\r\n\t\t\r\n\t\t// 发球\r\n\t\tif(this._time>5){\r\n\t\t\tthis._time=0;\r\n\t\t\tthis.addBall();\r\n\t\t}else{this._time+=dt;}\r\n\t\t\r\n  },\r\n\t\r\n\t// 初始化数据\r\n  initDate(){\r\n\t\tvar _this=this;\r\n\t\t_this.success=0;\r\n\t\t_this.baseArr=[];//1-75\r\n\t\tfor(var i=1;i<76;i++){_this.baseArr.push(i);}\r\n\t\t\r\n\t\t_this.baseBingo={\r\n\t\t\tB:_this.baseArr.slice(0,15),\r\n\t\t\tI:_this.baseArr.slice(15,30),\r\n\t\t\tN:_this.baseArr.slice(30,45),\r\n\t\t\tG:_this.baseArr.slice(45,60),\r\n\t\t\tO:_this.baseArr.slice(60,75),\r\n\t\t};\r\n\r\n\t},\r\n  \r\n  // 初始化单个游戏盘\r\n  initTrayData(n){\r\n    var _this=this;\r\n    var arr=[];\r\n    var listB=_this.randomCard(_this.baseBingo.B,5);\r\n    var listI=_this.randomCard(_this.baseBingo.I,5);\r\n    var listN=_this.randomCard(_this.baseBingo.N,4);\r\n    var listG=_this.randomCard(_this.baseBingo.G,5);\r\n    var listO=_this.randomCard(_this.baseBingo.O,5);\r\n    \r\n    listB.forEach(function(v,i){arr.push(new _this.Card(v,false));})\r\n    listI.forEach(function(v,i){arr.push(new _this.Card(v,false));})\r\n    listN.forEach(function(v,i){arr.push(new _this.Card(v,false));})\r\n    listG.forEach(function(v,i){arr.push(new _this.Card(v,false));})\r\n    listO.forEach(function(v,i){arr.push(new _this.Card(v,false));})\r\n    arr.splice(12,0,new _this.Card('',true));\r\n    return arr;\r\n  },\r\n\t\r\n\t// 从数组中随机抽取n项生成新数组（n<arr.length）\r\n\trandomCard(arr,n){\r\n    var copy=[];\r\n    arr.forEach(function(v,i){copy[i]=v});\r\n\t\tvar temp=[];\r\n\t\tfor(var i=0;i<n;i++){\r\n\t\t\tvar t=Math.floor(Math.random()*copy.length);\r\n\t\t\ttemp.push(copy.splice(t,1)[0])\r\n\t\t}\r\n\t\treturn temp;\r\n\t},\r\n\t\r\n\t// 卡构造函数\r\n\tCard(num,sign){\r\n\t\tthis.num=num;\r\n\t\tthis.sign=sign;\r\n\t},\r\n\t\r\n\r\n\t\r\n\t\r\n\t\r\n\t// 发球\r\n\taddBall(){\r\n\t\tvar newBall = cc.instantiate(this.ballPrefab);\r\n\t\tnewBall.getComponent('balljs').num=this.randomBall();\r\n\t\tthis.sendNode.insertChild(newBall,0);\r\n\t}, \r\n\t\r\n\t// 随机一个球号\r\n\trandomBall(){\r\n\t\tvar t=Math.floor(Math.random()*this.baseArr.length);\r\n\t\tvar temp=this.baseArr.splice(t,1)[0];\r\n\t\tthis._doneArr.push(temp);\r\n\t\treturn temp;\r\n\t},\r\n\t\r\n\r\n\r\n\r\n  // 游戏结束\r\n  gameEnd(str){\r\n\t\tthis.going=false;\r\n    this.node.getChildByName('gameend').active=true;\r\n\t\tthis.endLabel.string=str;\r\n  },\r\n\r\n  back(){\r\n    cc.director.loadScene(\"main\");\r\n  },\r\n\t\r\n  again(){\r\n    cc.director.loadScene(\"game\");\r\n  },\r\n  \r\n\r\n\r\n});\r\n"]}